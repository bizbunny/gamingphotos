<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <link href="./styles.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous"> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body onload="loadingLoader()" style="margin:0;">
  <div id="loader"></div>
  <nav class="navbar navbar-expand-sm navbar-dark" id="primary_nav_wrap">
    <div class="container-fluid">
      <div style="display:none;" id="mainContent" class="animate-left">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <div class="dropdown">
            <button onclick="gameSort()" class="dropbtn">Dropdown</button>
            <div id="gameDropdown" class="dropdown-content">
              <!-- Dropdown items will be dynamically generated by JavaScript -->
            </div>
          </div>
        </div>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="button-list navbar-nav w-100">
            <li class="button active nav-item" data-filter="all"><div type="button" class="Btn" name="all" title="All"><a class="nav-link" aria-current="page" href="#">All</a></div></li>
          </ul>
        </div>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="button-list navbar-nav w-100" id="filter-buttons">
            <!-- Filter buttons will be dynamically generated by JavaScript -->
          </ul>
        </div>
      </div>
    </div>
  </nav>
  <div class="content">
    <div class="container__numbers">
      <div id="project-grid">
        <div style="display:none;" id="photos" class="animate-bottom">
          <div class="row" id="project-grid-items">
            <!-- Grid items will be injected here by JavaScript -->
          </div>
        </div>
      </div>
    </div>
    <div id="modalL"></div>
  </div>

  <!-- jQuery and Bootstrap JS  Order Matters: Load jQuery first, then Popper.js, and finally Bootstrap's JavaScript.-->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
  <script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="./games-config.js"></script>
  <script src="./animations.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const dropdownContent = document.getElementById("gameDropdown");
      const filterButtons = document.getElementById("filter-buttons");
  
      // Generate dropdown items
      for (const game in gamesConfig) {
        const link = document.createElement("a");
        link.href = `#${game}`;
        link.textContent = game === 'nogame' ? 'Home' : game.charAt(0).toUpperCase() + game.slice(1);
        dropdownContent.appendChild(link);
      }
  
      // Generate filter buttons and labels
      for (const game in gamesConfig) {
        const filters = gamesConfig[game].filters;
  
        if (game === 'loveanddeepspace') {
          // Handle labeled filters for Love & Deepspace
          Object.keys(filters).forEach(category => {
            // Add a category label
            const categoryLabel = document.createElement("li");
            categoryLabel.className = "button nav-item filter-category";
            categoryLabel.setAttribute("data-category", category);
            categoryLabel.innerHTML = `<div type="button">${category.charAt(0).toUpperCase() + category.slice(1)}:</div>`;
            filterButtons.appendChild(categoryLabel);
  
            // Add filter buttons under the category
            filters[category].forEach(filter => {
              const li = document.createElement("li");
              li.className = `button nav-item data-game='${game}'`;
              li.setAttribute("data-filter", filter);
              li.innerHTML = `
                <div type="button" class="Btn" name="${filter}" title="${filter}">
                  <a class="nav-link" aria-current="page" href="#">${filter.charAt(0).toUpperCase() + filter.slice(1)}</a>
                </div>
              `;
              filterButtons.appendChild(li);
            });
          });
        } else {
          // Handle unlabeled filters for other games
          filters.forEach(filter => {
            if (filter !== 'all') {
              const li = document.createElement("li");
              li.className = `button nav-item data-game='${game}'`;
              li.setAttribute("data-filter", filter);
              li.innerHTML = `
                <div type="button" class="Btn" name="${filter}" title="${filter}">
                  <a class="nav-link" aria-current="page" href="#">${filter.charAt(0).toUpperCase() + filter.slice(1)}</a>
                </div>
              `;
              filterButtons.appendChild(li);
            }
          });
        }
      }
    });
  </script>
</body>
</html>